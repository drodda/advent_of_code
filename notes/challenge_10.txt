Part 2:

As the problem only contains joltage jumps of 1 and 3 between neighbouring numbers this limits the problem space that needs to be searched.

For a joltage difference of 3 both neighbours are required, as removing either will result in a joltage difference of more than 3.
A number can only be removed if it has a joltage difference of less than 3 between both neighbours. In practice this means only joltage differences of 1 between neighbours. The problem is then to permute which numbers can be removed from consecutive sequences of  joltage difference 1.

For only two consecutive numbers with a joltage difference 1 neither can be removed, as removing either will result in a joltage difference of more than 3 between the numbers on either side. There is only 1 permutation for this combination.

For n bits there are 2^(n-1) combinations, but any combination with more than 2 off bits in a row is invalid as this would result in a joltage difference of more than 3. The general solution to this problem is 2^(n) - sum[i=0..(n-2)] 2^(i).

The first value cannot be removed as this would result in a joltage difference of more than 3 for the preceding value, so for

A sequence of k numbers in a row with joltage difference of 1 is a sequence of (k-1) differences of 1. The first and last values cannot be removed as this would result in a joltage difference of more than 3 between preceding or following values, so there are permutations of (k-2) possible numbers that can be removed.
If working on lengths of sequences of differences, a sequence of m differences of 1 has permutations of (m-2) possible numbers that can be removed.

To calculate the number of permutations for the entire sequence, the difference in joltages were grouped into sequences of 1 and 3. Multiply these across all of the groups of 1's in the joltage differences to get the total number of permutations.

Example permutations:

2 values with difference 1
Length 1 sequence of differences 1
= 1 permutations
    0,1, ...

3 values with difference 1
Length 2 sequence of differences 1
= 2 permutations
    0,1,2, ...
    0, ,2, ...

3 values with difference 1
Length 3 sequence of differences 1
= 4 permutations
    0,1,2,3, ...
    0, ,2,3, ...
    0,1, ,3, ...
    0, , ,3, ...

4 values with difference 1
Length 3 sequence of differences 1
= 7 valid permutations, 1 invalid permutation
    0,1,2,3,4, ...
    0, ,2,3,4, ...
    0,1, ,3,4, ...
    0, , ,3,4, ...
    0,1,2, ,4, ...
    0, ,2, ,4, ...
    0,1, , ,4, ...
    0, , , ,4, ... <= INVALID

5 values with difference 1
Length 4 sequence of differences 1
= 13 valid permutations, 3 invalid permutation
    0,1,2,3,4,5, ...
    0, ,2,3,4,5, ...
    0,1, ,3,4,5, ...
    0, , ,3,4,5, ...
    0,1,2, ,4,5, ...
    0, ,2, ,4,5, ...
    0,1, , ,4,5, ...
    0, , , ,4,5, ... <= INVALID
    0,1,2,3, ,5, ...
    0, ,2,3, ,5, ...
    0,1, ,3, ,5, ...
    0, , ,3, ,5, ...
    0,1,2, , ,5, ...
    0, ,2, , ,5, ...
    0,1, , , ,5, ... <= INVALID
    0, , , , ,5, ... <= INVALID
